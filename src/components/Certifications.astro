---
import { getTranslations, type Language } from "../i18n/translations";
import SectionHeader from "./common/SectionHeader.astro";
import { getCertificationsByYear } from "../data/certifications";

interface Props {
  lang?: Language;
}

const { lang = "en" } = Astro.props;
const t = getTranslations(lang);
const certsByYear = getCertificationsByYear();
---

<section
  id="certifications"
  class="py-12 sm:py-16 md:py-20 px-4 sm:px-6 bg-slate-50 dark:bg-slate-800"
>
  <div class="max-w-6xl mx-auto">
    <SectionHeader
      title={t.certifications.title}
      subtitle={t.certifications.description}
      data-i18n="certifications.title"
      data-i18n-subtitle="certifications.description"
    />

    <div class="space-y-12">
      {
        certsByYear.map(([year, certs]) => (
          <div class="animate-fade-up" data-reveal>
            <h3
              class="text-2xl font-bold text-teal-900 dark:text-teal-400 mb-6"
              data-i18n={`certifications.year${year}`}
            >
              {year}
            </h3>
            <div class="grid gap-4 sm:gap-6 md:grid-cols-2">
              {certs.map((cert) => (
                <div
                  class="group bg-white dark:bg-slate-900 p-5 sm:p-6 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-teal-200 dark:hover:border-teal-600 hover:shadow-xl transition-all"
                  data-reveal
                >
                  <div class="flex items-start gap-4">
                    <div class="shrink-0 w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
                      <svg
                        class="w-6 h-6 text-teal-900 dark:text-teal-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"
                        />
                      </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                      <h4 class="font-semibold text-slate-900 dark:text-white mb-2 group-hover:text-teal-900 dark:group-hover:text-teal-400 transition-colors">
                        {cert.title}
                      </h4>
                      <div class="flex items-center gap-2">
                        {cert.inProgress ? (
                          <span
                            class="inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 font-medium"
                            data-i18n="certifications.inProgress"
                          >
                            <svg
                              class="w-3 h-3"
                              fill="currentColor"
                              viewBox="0 0 20 20"
                            >
                              <path
                                fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                                clip-rule="evenodd"
                              />
                            </svg>
                            {t.certifications.inProgress}
                          </span>
                        ) : cert.url ? (
                          <a
                            href={cert.url}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="inline-flex items-center gap-1 text-xs px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900/30 text-teal-900 dark:text-teal-300 font-medium hover:bg-teal-200 dark:hover:bg-teal-900/50 transition-colors"
                            data-i18n="certifications.viewCertificate"
                          >
                            {t.certifications.viewCertificate}
                            <svg
                              class="w-3 h-3"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                              />
                            </svg>
                          </a>
                        ) : null}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>

    <!-- Stats -->
    <div
      class="mt-12 p-8 bg-linear-to-r from-teal-900 to-teal-700 dark:from-teal-800 dark:to-teal-600 text-white rounded-2xl text-center animate-fade-up"
      data-reveal
    >
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
        <div>
          <div
            class="text-4xl font-bold mb-2"
            data-i18n="certifications.stats.total"
          >
            {certsByYear.flatMap(([_, certs]) => certs).length}+
          </div>
          <div
            class="text-teal-100"
            data-i18n="certifications.stats.totalLabel"
          >
            {t.certifications.stats.totalLabel}
          </div>
        </div>
        <div>
          <div
            class="text-4xl font-bold mb-2"
            data-i18n="certifications.stats.years"
          >
            {certsByYear.length}
          </div>
          <div
            class="text-teal-100"
            data-i18n="certifications.stats.yearsLabel"
          >
            {t.certifications.stats.yearsLabel}
          </div>
        </div>
        <div>
          <div
            class="text-4xl font-bold mb-2"
            data-i18n="certifications.stats.learning"
          >
            âˆž
          </div>
          <div
            class="text-teal-100"
            data-i18n="certifications.stats.learningLabel"
          >
            {t.certifications.stats.learningLabel}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
