---
import { getTranslations, type Language } from "../i18n/translations";
import { Image } from "astro:assets";
import SectionHeader from "./common/SectionHeader.astro";

interface Props {
  lang?: Language;
}

const { lang = "en" } = Astro.props;
const t = getTranslations(lang);
const projects = t.projects.items;
---

<section
  id="projects"
  class="py-12 sm:py-16 md:py-20 px-4 sm:px-6 bg-white dark:bg-slate-900"
>
  <div class="max-w-6xl mx-auto">
    <SectionHeader title={t.projects.title} data-i18n="projects.title" />

    <div class="grid md:grid-cols-2 gap-6 sm:gap-8">
      {
        projects.map((project, index) => (
          <article
            class="group bg-slate-50 dark:bg-slate-800 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700 hover:border-teal-200 dark:hover:border-teal-600 hover:shadow-xl transition-all animate-fade-in-up"
            data-reveal
          >
            {/* PROJECT IMAGE */}
            <div class="relative h-48 sm:h-56 md:h-64 bg-linear-to-br from-slate-200 to-slate-300 dark:from-slate-700 dark:to-slate-800 overflow-hidden">
              {project.image && (
                <Image
                  src={project.image}
                  alt={project.name}
                  width={600}
                  height={400}
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                />
              )}

              {/* LOGO OVERLAY */}
              {project.logo && (
                <div class="absolute top-4 left-4 bg-white p-3 rounded-lg shadow-md border dark:border-slate-700">
                  <Image
                    src={project.logo}
                    alt={`${project.name} Logo`}
                    width={32}
                    height={32}
                    class="w-8 h-8 object-contain"
                  />
                </div>
              )}

              {project.featured && (
                <div class="absolute top-4 right-4">
                  <span class="px-3 py-1 bg-teal-900 dark:bg-teal-600 text-white text-sm font-semibold rounded-full">
                    ‚≠ê
                  </span>
                </div>
              )}
            </div>
            {/* CONTENT */}
            <div class="p-6">
              <h3
                class="text-2xl font-bold text-slate-900 dark:text-white mb-2"
                data-i18n={`projects.items.${index}.name`}
              >
                {project.name}
              </h3>
              <p
                class="text-teal-900 dark:text-teal-400 font-medium mb-3"
                data-i18n={`projects.items.${index}.tagline`}
              >
                {project.tagline}
              </p>
              <p
                class="text-slate-600 dark:text-slate-300 mb-4 leading-relaxed"
                data-i18n={`projects.items.${index}.description`}
              >
                {project.description}
              </p>

              {/* TECH STACK */}
              <div class="mb-4">
                <img
                  src={`https://skills.syvixor.com/api/icons?i=${project.tech}`}
                  alt="Tech Stack"
                  class="h-7"
                />
              </div>

              {/* LINKS */}
              <div class="flex gap-3">
                {project.links.demo && (
                  <a
                    href={project.links.demo}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="px-4 py-2 bg-teal-900 dark:bg-teal-600 text-white rounded-lg hover:bg-teal-800 dark:hover:bg-teal-500 transition-all hover:scale-105 hover:shadow-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-teal-900 dark:focus:ring-teal-400 focus:ring-offset-2 dark:focus:ring-offset-slate-800"
                    data-i18n="projects.demo"
                  >
                    {t.projects.demo}
                  </a>
                )}
                {project.links.github && project.links.github !== "#" && (
                  <a
                    href={project.links.github}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:border-teal-900 dark:hover:border-teal-400 hover:text-teal-900 dark:hover:text-teal-400 transition-all hover:shadow-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-teal-900 dark:focus:ring-teal-400 focus:ring-offset-2 dark:focus:ring-offset-slate-800"
                    data-i18n="projects.github"
                  >
                    {t.projects.github}
                  </a>
                )}
              </div>
            </div>
          </article>
        ))
      }
    </div>
  </div>
</section>
